<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>CMS Login</title>
    <!-- Beri tahu CMS kita akan manual init -->
    <script>window.CMS_MANUAL_INIT = true;</script>
    <!-- Masukkan bundle netlify-cms yang benar -->
    <script src="https://unpkg.com/netlify-cms@^2.20.0/dist/netlify-cms.js"></script>
  </head>
  <body>
    <!-- Tempat CMS mounting -->
    <div id="nc-root"></div>
    <script>
      // Inisialisasi manual dengan konfigurasi embedded
      CMS.init({
        config: {
          backend: {
            name: 'github',
            repo: 'aldi251298/astro-blog.git',  // ‚Üê ganti sesuai GitHub repo kamu
            branch: 'main',
          },
          media_folder: 'public/uploads',
          public_folder: '/uploads',
          collections: [
            {
              name: 'posts',
              label: 'Posts',
              folder: 'content/posts',
              create: true,
              slug: '{{year}}-{{month}}-{{day}}-{{slug}}',
              fields: [
                { label: 'Title', name: 'title', widget: 'string' },
                { label: 'Date',  name: 'date',  widget: 'datetime' },
                { label: 'Excerpt', name: 'excerpt', widget: 'text' },
                { label: 'Body',   name: 'body',   widget: 'markdown' },
                { label: 'Tags',   name: 'tags',   widget: 'list' },
              ],
            },
          ],
        },
      });
    </script>
  </body>
</html>
